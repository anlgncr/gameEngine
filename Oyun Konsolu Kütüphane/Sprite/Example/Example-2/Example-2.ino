#include "Manager.h"

Manager manager;
Sprite image;

const uint8_t mega[] PROGMEM = { 25, 0, 24, 0,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x18, 0x04, 0x82, 0x42, 0x23, 0xA5, 0xB9,
	0x2A, 0xAC, 0x28, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x18, 0x04,
	0x44, 0xC2, 0xE3, 0x04, 0x0B, 0x10, 0x14, 0x15, 0x15, 0x14, 0xE9, 0xC4, 0x47, 0x04, 0x18, 0xE0,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xA1, 0xA2, 0x92, 0x9A, 0x85, 0x83, 0x82, 0xE4, 0x14, 0x08,
	0x94, 0xE4, 0x82, 0x83, 0x85, 0x9A, 0x92, 0xA2, 0xA1, 0xC0, 0x00
};

void move(EventArgs* e){
	DisplayObject* d = e->getReceiver();
	if(manager.isButtonDown(BUTTON_B)){
		d->setX(d->getX() + 1);
	}
	else if(manager.isButtonDown(BUTTON_D)){
		d->setX(d->getX() - 1);
	}
}

void setup() {
	manager.begin();
	image.drawFromProgmem(mega);
	Manager::scene.addChild(&image);
	image.addEventListener(BUTTON_DOWN, move);
}

void loop() {
	manager.run();
}